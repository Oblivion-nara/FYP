<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Mon Nov 13 16:43:53 GMT 2017 -->
<title>Expirable</title>
<meta name="date" content="2017-11-13">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Expirable";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":17,"i2":17};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xyz/acygn/mokapot/util/DeterministicAutocloseable.html" title="interface in xyz.acygn.mokapot.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableMethod.html" title="interface in xyz.acygn.mokapot.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xyz/acygn/mokapot/util/Expirable.html" target="_top">Frames</a></li>
<li><a href="Expirable.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">xyz.acygn.mokapot.util</div>
<h2 title="Interface Expirable" class="title">Interface Expirable</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">Expirable</span></pre>
<div class="block">An interface describing objects that can be atomically "effectively
 deallocated" even while there are still references to them. "Expiring" an
 object allows it to do cleanup, and the object will thereafter be treated as
 nonexistent; all method calls on it (including <code>expire()</code> itself)
 should respond by throwing <code>ExpiredException</code>.
 <p>
 Once the object has expired, it's not supposed to be used any more; any
 methods on the object should return exceptions or failure codes. The basic
 idea here is that it's possible to store an object in a map with weak values,
 and treat a missing key, a key with a deallocated value, and a key with an
 expired value all identically; this means that the object can effectively be
 removed from the map via expiring it, without any risk of race conditions
 between removing an expired entry from the map and adding a new entry to
 replace it. (A naive algorithm which simply removes the object from the map
 would risk accidentally removing the newly added object instead.)</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Alex Smith</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../xyz/acygn/mokapot/util/KeepalivePool.html" title="class in xyz.acygn.mokapot.util"><code>KeepalivePool</code></a>, 
<a href="../../../../xyz/acygn/mokapot/util/ExpirableMap.html" title="class in xyz.acygn.mokapot.util"><code>ExpirableMap</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableMethod.html" title="interface in xyz.acygn.mokapot.util">Expirable.ExpirableMethod</a>&lt;<a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableMethod.html" title="type parameter in Expirable.ExpirableMethod">A</a> extends <a href="../../../../xyz/acygn/mokapot/util/Expirable.html" title="interface in xyz.acygn.mokapot.util">Expirable</a>,<a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableMethod.html" title="type parameter in Expirable.ExpirableMethod">R</a>&gt;</span></code>
<div class="block">An interface representing a method that can be called on an Expirable
 object and that has a return value.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableVoidMethod.html" title="interface in xyz.acygn.mokapot.util">Expirable.ExpirableVoidMethod</a>&lt;<a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableVoidMethod.html" title="type parameter in Expirable.ExpirableVoidMethod">A</a> extends <a href="../../../../xyz/acygn/mokapot/util/Expirable.html" title="interface in xyz.acygn.mokapot.util">Expirable</a>&gt;</span></code>
<div class="block">An interface representing a method that can be called on an Expirable
 object and that has no return value.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpiredException.html" title="class in xyz.acygn.mokapot.util">Expirable.ExpiredException</a></span></code>
<div class="block">Exception thrown when an attempt is made to call a method on an expired
 object.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xyz/acygn/mokapot/util/Expirable.html#expire--">expire</a></span>()</code>
<div class="block">Causes this object to perform any cleanup required, then permanently mark
 itself as expired.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static &lt;A extends <a href="../../../../xyz/acygn/mokapot/util/Expirable.html" title="interface in xyz.acygn.mokapot.util">Expirable</a>,R&gt;<br>R</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xyz/acygn/mokapot/util/Expirable.html#runOr-A-xyz.acygn.mokapot.util.Expirable.ExpirableMethod-java.util.function.Supplier-">runOr</a></span>(A&nbsp;on,
     <a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableMethod.html" title="interface in xyz.acygn.mokapot.util">Expirable.ExpirableMethod</a>&lt;A,R&gt;&nbsp;method,
     <a href="file:///usr/share/doc/openjdk-8-jre-headless/api/java/util/function/Supplier.html?is-external=true" title="class or interface in java.util.function">Supplier</a>&lt;R&gt;&nbsp;or)</code>
<div class="block">Attempts to run the given method on the given expirable object, running
 alternative code if the object is null or expired.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static &lt;A extends <a href="../../../../xyz/acygn/mokapot/util/Expirable.html" title="interface in xyz.acygn.mokapot.util">Expirable</a>&gt;<br>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xyz/acygn/mokapot/util/Expirable.html#runOr-A-xyz.acygn.mokapot.util.Expirable.ExpirableVoidMethod-java.lang.Runnable-">runOr</a></span>(A&nbsp;on,
     <a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableVoidMethod.html" title="interface in xyz.acygn.mokapot.util">Expirable.ExpirableVoidMethod</a>&lt;A&gt;&nbsp;method,
     <a href="file:///usr/share/doc/openjdk-8-jre-headless/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;or)</code>
<div class="block">Attempts to run the given method on the given expirable object, running
 alternative code if the object is null or expired.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="expire--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expire</h4>
<pre>void&nbsp;expire()
     throws <a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpiredException.html" title="class in xyz.acygn.mokapot.util">Expirable.ExpiredException</a></pre>
<div class="block">Causes this object to perform any cleanup required, then permanently mark
 itself as expired. The object is thereafter useless, serving only to
 inform anyone who tries to use a reference to the existing object that
 they need to use a different object instead.
 <p>
 Like all methods on an expirable object, this method has no effect on an
 expired object, and simply throws an exception. Similarly, if two or more
 attempts are made to call this method concurrently on a previously
 non-expired object, exactly one must succeed, with the rest throwing the
 exception. This can be most easily implemented by making the
 implementation of this method <code>synchronized</code>, but there may be
 more efficient ways to implement it special cases.
 <p>
 Note that it's possible that other methods will start considering the
 object expired before this method returns; in concurrent cases, what's
 important is that there's a point in time, during the execution of this
 message, past which the object counts as expired, and before which the
 object counts as not expired.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpiredException.html" title="class in xyz.acygn.mokapot.util">Expirable.ExpiredException</a></code> - If this is not the first call to this method (if
 it's called multiple times concurrently, one such call must be chosen to
 be the "first call")</dd>
</dl>
</li>
</ul>
<a name="runOr-xyz.acygn.mokapot.util.Expirable-xyz.acygn.mokapot.util.Expirable.ExpirableMethod-java.util.function.Supplier-">
<!--   -->
</a><a name="runOr-A-xyz.acygn.mokapot.util.Expirable.ExpirableMethod-java.util.function.Supplier-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runOr</h4>
<pre>static&nbsp;&lt;A extends <a href="../../../../xyz/acygn/mokapot/util/Expirable.html" title="interface in xyz.acygn.mokapot.util">Expirable</a>,R&gt;&nbsp;R&nbsp;runOr(A&nbsp;on,
                                       <a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableMethod.html" title="interface in xyz.acygn.mokapot.util">Expirable.ExpirableMethod</a>&lt;A,R&gt;&nbsp;method,
                                       <a href="file:///usr/share/doc/openjdk-8-jre-headless/api/java/util/function/Supplier.html?is-external=true" title="class or interface in java.util.function">Supplier</a>&lt;R&gt;&nbsp;or)</pre>
<div class="block">Attempts to run the given method on the given expirable object, running
 alternative code if the object is null or expired.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>A</code> - The class of the object.</dd>
<dd><code>R</code> - The return value of the method.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>on</code> - The object to run on.</dd>
<dd><code>method</code> - The method to run.</dd>
<dd><code>or</code> - The code to run instead, if the object is null or expired.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The return value of the method.</dd>
</dl>
</li>
</ul>
<a name="runOr-xyz.acygn.mokapot.util.Expirable-xyz.acygn.mokapot.util.Expirable.ExpirableVoidMethod-java.lang.Runnable-">
<!--   -->
</a><a name="runOr-A-xyz.acygn.mokapot.util.Expirable.ExpirableVoidMethod-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>runOr</h4>
<pre>static&nbsp;&lt;A extends <a href="../../../../xyz/acygn/mokapot/util/Expirable.html" title="interface in xyz.acygn.mokapot.util">Expirable</a>&gt;&nbsp;void&nbsp;runOr(A&nbsp;on,
                                        <a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableVoidMethod.html" title="interface in xyz.acygn.mokapot.util">Expirable.ExpirableVoidMethod</a>&lt;A&gt;&nbsp;method,
                                        <a href="file:///usr/share/doc/openjdk-8-jre-headless/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;or)</pre>
<div class="block">Attempts to run the given method on the given expirable object, running
 alternative code if the object is null or expired.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>A</code> - The class of the object.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>on</code> - The object to run on.</dd>
<dd><code>method</code> - The method to run.</dd>
<dd><code>or</code> - The code to run instead, if the object is null or expired.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xyz/acygn/mokapot/util/DeterministicAutocloseable.html" title="interface in xyz.acygn.mokapot.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../xyz/acygn/mokapot/util/Expirable.ExpirableMethod.html" title="interface in xyz.acygn.mokapot.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xyz/acygn/mokapot/util/Expirable.html" target="_top">Frames</a></li>
<li><a href="Expirable.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
